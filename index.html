<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
  <title>Tabuleiro Imersivo - Educação Sexual</title>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100%;
            color: #333;
            overflow-x: auto;
            position: relative;
        }

        /* Splash Screen com Capa do Vídeo */
        #splashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.5s ease;
        }

        .video-cover {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 400px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .video-thumbnail {
            text-align: center;
            color: white;
            padding: 40px;
        }

        .play-button {
            background: rgba(255, 255, 255, 0.2);
            border: 3px solid white;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .play-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .play-icon {
            font-size: 3rem;
            margin-bottom: 5px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .play-text {
            font-size: 0.9rem;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .video-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .video-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        #introVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .video-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Botão de Mute */
        #muteButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: none;
        }

        #muteButton:hover {
            background: rgba(255,255,255,1);
            transform: scale(1.1);
        }

        /* Animações de entrada */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        /* Jogo principal (oculto inicialmente) */
        .game-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .instructions {
            font-size: 1.2rem;
            color: #4a5568;
            margin-bottom: 20px;
            font-weight: 500;
        }

        /* Tabuleiro Circular */
        #gameBoard {
            position: relative;
            width: 600px;
            height: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border: 5px solid rgba(255, 255, 255, 0.3);
        }

        .square {
            position: absolute;
            width: 80px;
            height: 100px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            color: white;
            font-weight: bold;
            text-align: center;
            animation: slideIn 0.5s ease-out forwards;
            opacity: 0;
            transform: scale(0);
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .square:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: #ffd700;
        }

        .square.start {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .square.finish {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .square.vf {
            background: linear-gradient(135deg, #9f7aea, #805ad5);
        }

        /* CORREÇÃO CSS: NOVO ESTILO PARA AVATARES DENTRO DAS CASAS DO TABULEIRO */
        .square-character {
            font-size: 0; /* Esconde o emoji */
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            border: 2px solid rgba(255, 255, 255, 0.8);
            margin-bottom: 5px;
        }

        .square-number {
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Jogadores */
        .player {
            position: absolute;
            bottom: -15px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            color: white;
            border: 3px solid white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .player1 {
            background: #e53e3e;
            left: 10px;
        }

        .player2 {
            background: #3182ce;
            right: 10px;
        }

        /* Stats dos Jogadores */
        .players-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 20px;
        }

        .player-stat {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 200px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .player-stat.active {
            border: 3px solid #ffd700;
            transform: scale(1.05);
        }

        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .player-name.active {
            color: #d69e2e;
        }

        .player-coins, .player-bombs {
            font-size: 1rem;
            margin: 5px 0;
            color: #4a5568;
        }

        /* Roleta */
        .roulette-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            gap: 30px;
        }

        #roulette {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(
                #ff6b6b 0deg 60deg,
                #4ecdc4 60deg 120deg,
                #45b7d1 120deg 180deg,
                #96ceb4 180deg 240deg,
                #feca57 240deg 300deg,
                #ff9ff3 300deg 360deg
            );
            position: relative;
            cursor: pointer;
            transition: transform 2s cubic-bezier(0.23, 1, 0.32, 1);
            border: 5px solid #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        #roulette.spinning {
            animation: spin 2s cubic-bezier(0.23, 1, 0.32, 1);
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(1440deg); }
        }

        #rouletteResult {
            font-size: 3rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            min-width: 60px;
            text-align: center;
        }

        .spin-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* Character Card Styles */
        .character-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 1500;
            transition: all 0.3s ease;
            opacity: 0;
            backdrop-filter: blur(10px);
            border: 3px solid transparent;
        }

        .character-card.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .character-card.happy {
            border-color: #48bb78;
            background: linear-gradient(135deg, rgba(72, 187, 120, 0.1), rgba(255, 255, 255, 0.95));
        }

        .character-card.sad {
            border-color: #f56565;
            background: linear-gradient(135deg, rgba(245, 101, 101, 0.1), rgba(255, 255, 255, 0.95));
        }

        .character-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background-size: cover;
            background-position: center;
            border: 4px solid #e2e8f0;
            transition: all 0.3s ease;
            
            /* CORREÇÃO CRÍTICA: Oculta o texto/emoji para mostrar a imagem */
            font-size: 0 !important; 
            text-indent: -9999px; 
            overflow: hidden;
        }

        .character-avatar.happy {
            border-color: #48bb78;
            transform: scale(1.1);
        }

        .character-avatar.sad {
            border-color: #f56565;
            transform: scale(0.9);
        }

        .character-message {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4a5568;
            transition: all 0.3s ease;
        }

        .character-message.happy {
            color: #38a169;
        }

        .character-message.sad {
            color: #e53e3e;
        }

        /* Question Modal Styles */
        .question-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1600;
        }

        .question-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        .question-text {
            font-size: 1.4rem;
            color: #2d3748;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .question-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-answer {
            background: #4299e1;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .btn-answer:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        /* Explanation Modal */
        .explanation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1700;
        }

        .explanation-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
            text-align: left;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        .explanation-text {
            font-size: 1.2rem;
            color: #2d3748;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .btn-continue {
            background: #4299e1;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .btn-continue:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        /* Bomb Animation */
        .bomb-explosion {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8rem;
            z-index: 2000;
            animation: explode 1s ease-out;
            pointer-events: none;
        }

        @keyframes explode {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

        /* Coin Animation */
        .coin-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            z-index: 2000;
            animation: coinFlip 1s ease-out;
            pointer-events: none;
        }

        @keyframes coinFlip {
            0% { transform: translate(-50%, -50%) scale(0) rotateY(0deg); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2) rotateY(180deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.8) rotateY(360deg); opacity: 0; }
        }

        /* Efeitos de fundo */
        .bubbles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }

        .bubble:nth-child(1) {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            left: 10%;
            animation-delay: 0s;
        }

        .bubble:nth-child(2) {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            left: 20%;
            animation-delay: 2s;
        }

        .bubble:nth-child(3) {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #45b7d1, #96c93d);
            left: 35%;
            animation-delay: 4s;
        }

        .bubble:nth-child(4) {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #96ceb4, #feca57);
            left: 50%;
            animation-delay: 0s;
        }

        .bubble:nth-child(5) {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #feca57, #ff9ff3);
            left: 70%;
            animation-delay: 3s;
        }

        .bubble:nth-child(6) {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #ff9ff3, #667eea);
            left: 80%;
            animation-delay: 5s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            50% {
                transform: translateY(-10vh) rotate(180deg);
                opacity: 0.8;
            }
        }

        @media (max-width: 768px) {
            .video-cover {
                height: 300px;
                margin: 20px;
            }
            
            .video-title {
                font-size: 1.5rem;
            }
            
            .video-subtitle {
                font-size: 1rem;
            }
            
            .play-button {
                width: 100px;
                height: 100px;
            }
            
            .play-icon {
                font-size: 2.5rem;
            }

            #gameBoard {
                width: 400px;
                height: 400px;
            }

            .square {
                width: 60px;
                height: 80px;
            }

            .question-content {
                padding: 30px 20px;
            }

            .question-buttons {
                flex-direction: column;
                align-items: center;
            }

            .players-stats {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><div class="bubbles">
   <div class="bubble"></div>
   <div class="bubble"></div>
   <div class="bubble"></div>
   <div class="bubble"></div>
   <div class="bubble"></div>
   <div class="bubble"></div>
  </div><div id="splashScreen">
   <div class="video-cover">
    <div class="video-thumbnail" id="videoThumbnail">
     <div class="play-button" onclick="startVideo()">
      <div class="play-icon">
       ▶️
      </div>
      <div class="play-text">
       Assistir Introdução
      </div>
     </div>
     <div class="video-title">
      Tabuleiro Educativo
     </div>
     <div class="video-subtitle">
      Educação Sexual Interativa
     </div>
    </div>
    <video id="introVideo" controls><source src="assets/video/1000007047.mp4" type="video/mp4"> Seu navegador não suporta a reprodução de vídeo.
    </video>
    <div class="video-controls" id="videoControls"><button class="btn btn-primary" onclick="startGame()">Iniciar Jogo</button> <button class="btn btn-secondary" onclick="skipVideo()">Pular Vídeo</button>
    </div>
   </div>
  </div><button id="muteButton" onclick="toggleMute()">🔇</button> <div class="character-card" id="characterCard">
   <div class="character-avatar" id="characterAvatar"></div>
   <div class="character-message" id="characterMessage">
    Boa sorte!
   </div>
  </div><div class="question-modal" id="questionModal">
   <div class="question-content">
    <div class="question-text" id="questionText"></div>
    <div class="question-buttons"><button class="btn-answer" onclick="answerQuestion('V')">VERDADEIRO</button> <button class="btn-answer" onclick="answerQuestion('F')">FALSO</button>
    </div>
   </div>
  </div><div class="explanation-modal" id="explanationModal">
   <div class="explanation-content">
    <div class="explanation-text" id="explanationText"></div><button class="btn-continue" onclick="closeExplanation()">Continuar</button>
   </div>
  </div><div class="game-container" id="gameContainer">
   <div class="game-header">
    <h1 class="game-title" id="gameTitle">Tabuleiro Imersivo - Educação Sexual</h1>
    <p class="instructions" id="instructionsText">Dois jogadores competem no tabuleiro circular! Gire a roleta, mova-se pelas casas e responda perguntas educativas!</p>
   </div><div class="players-stats">
    <div class="player-stat" id="player1Stats">
     <div class="player-name active">
      Jogador 1 - Casa 1
     </div>
     <div class="player-coins">
      🪙 0
     </div>
     <div class="player-bombs">
      💣 0
     </div>
    </div>
    <div class="player-stat" id="player2Stats">
     <div class="player-name">
      Jogador 2 - Casa 1
     </div>
     <div class="player-coins">
      🪙 0
     </div>
     <div class="player-bombs">
      💣 0
     </div>
    </div>
   </div><div class="roulette-container">
    <div id="roulette" onclick="spinRoulette()">
     🎲
    </div>
    <div id="rouletteResult">
     ?
    </div><button class="spin-button" onclick="spinRoulette()"> 🎲 GIRAR ROLETA </button>
   </div><div id="gameBoard"></div>
  </div><audio id="bgm" loop><source src="assets/audio/bgm.mp3"></audio>
  <audio id="sfxCoin"><source src="assets/audio/coin.wav"></audio>
  <audio id="sfxError"><source src="assets/audio/error.mp3"></audio>
  <audio id="sfxWin"><source src="assets/audio/win.wav"></audio>
  <script>
        // --- MAPA DE IMAGENS PERSONALIZADAS (CORRIGIDO) ---
        const CHARACTER_IMAGES = {
            'girl_default': 'assets/img/3.jpg',
            'girl_question': 'assets/img/2.jpg',
            'girl_win': 'assets/img/5.jpg',
            'girl_lose': 'assets/img/6.jpg',
            'boy_default': 'assets/img/4.jpg', 
            'boy_question': 'assets/img/7.jpg',
            'boy_win': 'assets/img/4.jpg',
            'boy_lose': 'assets/img/7.jpg'
        };

        // --- DADOS EDUCATIVOS DO JOGO (mantidos) ---
        const perguntasInformativas = [
            {"pergunta": "É seguro rasgar a embalagem do preservativo com os dentes para ser mais rápido.", "resposta_correta": "F", "explicacao": "FALSO. Rasgar com os dentes ou unhas pode causar microfuros invisíveis que anulam a proteção. Sempre use os dedos para rasgar na borda serrilhada. Guarde em locais frescos, longe do calor."},
            {"pergunta": "Se colocar o preservativo do lado errado e ele tocar no pênis, posso virá-lo e usar normalmente.", "resposta_correta": "F", "explicacao": "FALSO. Se começou do lado errado e tocou no pênis, jogue fora e pegue outro! Fluidos pré-ejaculatórios podem ter entrado em contato com a parte interna."},
            {"pergunta": "É importante apertar a pontinha do preservativo antes de desenrolar para tirar o ar.", "resposta_correta": "V", "explicacao": "VERDADEIRO. A pontinha é o reservatório do esperma. Se não tirar o ar, a pressão na ejaculação pode estourar o preservativo."},
            {"pergunta": "O preservativo protege mesmo se não desenrolar até a base do pênis.", "resposta_correta": "F", "explicacao": "FALSO. Deve desenrolar completamente até a base. É ali que a borda forma uma 'barreira' que ajuda a prender o esperma e manter a proteção."},
            {"pergunta": "Posso retirar o preservativo a qualquer momento após a ejaculação sem cuidados especiais.", "resposta_correta": "F", "explicacao": "FALSO. Deve ser rápido e cuidadoso imediatamente após a ejaculação, antes do pênis amolecer. Segure a borda na base e retire devagar."},
            {"pergunta": "O preservativo feminino pode ser colocado horas antes da relação sexual.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Esta é uma grande vantagem! Pode ser colocado com antecedência, tirando a pressão do momento e garantindo que a proteção já está pronta."},
            {"pergunta": "É normal o preservativo feminino ficar frouxo ou torcido dentro do canal vaginal.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Essa folga é normal e permite que ele se ajuste durante a relação. O importante é que o anel menor esteja bem fundo e o maior cubra a entrada."},
            {"pergunta": "Posso usar preservativo masculino e feminino ao mesmo tempo para maior proteção.", "resposta_correta": "F", "explicacao": "FALSO. NUNCA use os dois juntos! O atrito entre os materiais pode rasgar ambos os preservativos. Escolha apenas um."},
            {"pergunta": "O diafragma é considerado um método contraceptivo de barreira.", "resposta_correta": "V", "explicacao": "VERDADEIRO. O diafragma (usado com espermicida) e os preservativos são exemplos de métodos de barreira que impedem fisicamente a passagem dos espermatozoides."},
            {"pergunta": "A pílula do dia seguinte pode ser usada como método contraceptivo regular.", "resposta_correta": "F", "explicacao": "FALSO. É apenas para emergências. Usar regularmente causa desequilíbrios hormonais e é menos eficaz que métodos contraceptivos regulares."},
            {"pergunta": "O preservativo protege contra todas as IST sem exceção.", "resposta_correta": "F", "explicacao": "FALSO. Protege contra a maioria, mas IST como HPV e Herpes podem ser transmitidas pelo contato com áreas da pele não cobertas pelo preservativo."},
            {"pergunta": "O duche vaginal após a relação é eficaz para prevenir gravidez e IST.", "resposta_correta": "F", "explicacao": "FALSO. O duche pode empurrar bactérias para dentro do útero e desequilibra a flora vaginal, aumentando o risco de infecções."},
            {"pergunta": "O preservativo é o único método que oferece dupla proteção: contra gravidez e IST.", "resposta_correta": "V", "explicacao": "VERDADEIRO. É o único método contraceptivo que também oferece proteção contra a maioria das Infecções Sexualmente Transmissíveis."},
            {"pergunta": "O consentimento dado no início da relação vale para toda a atividade sexual.", "resposta_correta": "F", "explicacao": "FALSO. O consentimento deve ser contínuo e pode ser retirado a qualquer momento. Deve ser confirmado em cada etapa da atividade sexual."},
            {"pergunta": "Libido e desejo sexual são exatamente a mesma coisa.", "resposta_correta": "F", "explicacao": "FALSO. Libido é o impulso sexual geral (o 'motor'), enquanto desejo sexual é a vontade específica de ter atividade sexual (a 'vontade de dirigir')."},
            {"pergunta": "Sexting sem consentimento pode ter consequências legais graves.", "resposta_correta": "V", "explicacao": "VERDADEIRO. A distribuição não consensual de conteúdo íntimo (pornografia de vingança) é ilegal e pode ter graves consequências emocionais e legais."},
            {"pergunta": "Orientação Sexual e Identidade de Gênero referem-se ao mesmo conceito.", "resposta_correta": "F", "explicacao": "FALSO. Orientação Sexual é sobre atração por outras pessoas. Identidade de Gênero é o sentido interno de ser homem, mulher, ambos, nenhum ou outro gênero."},
            {"pergunta": "Uma pessoa sem sintomas visíveis de IST não pode ter nenhuma infecção.", "resposta_correta": "F", "explicacao": "FALSO. Muitas IST (como Clamídia e HPV) podem ser assintomáticas por muito tempo. Por isso são essenciais os testes regulares e o uso de preservativo."},
            {"pergunta": "Lubrificantes à base de óleo são seguros com preservativos de látex.", "resposta_correta": "F", "explicacao": "FALSO. Óleos (vaselina, óleos de massagem) danificam o látex, tornando o preservativo menos eficaz. Use lubrificantes à base de água ou silicone."},
            {"pergunta": "É impossível engravidar durante a menstruação.", "resposta_correta": "F", "explicacao": "FALSO. Embora menos provável, espermatozoides sobrevivem dias no corpo e a ovulação pode ocorrer mais cedo em alguns ciclos. Sempre use proteção se não deseja engravidar."}
        ];

        const perguntasRisco = [
            {"pergunta": "Verdade ou Mito: Esquecer a pílula anticoncepcional num dia, mas tomá-la no dia seguinte, anula completamente o risco de gravidez.", "resposta_correta": "F", "explicacao": "FALSO. A eficácia da pílula depende da tomada correta e diária. Se você falhar um dia, a proteção pode ser reduzida, e métodos de proteção adicionais (como o preservativo) devem ser usados nos dias seguintes, conforme as indicações médicas."},
            {"pergunta": "É seguro usar dois preservativos ao mesmo tempo para maior proteção.", "resposta_correta": "F", "explicacao": "FALSO. Usar dois preservativos aumenta o atrito entre eles, fazendo com que ambos se rasguem mais facilmente. Use sempre apenas um preservativo de cada vez."},
            {"pergunta": "A pílula do dia seguinte pode ser usada como método contraceptivo regular.", "resposta_correta": "F", "explicacao": "FALSO. A pílula do dia seguinte é apenas para emergências. Usar regularmente pode causar desequilíbrios hormonais e é menos eficaz que métodos contraceptivos regulares."},
            {"pergunta": "É possível engravidar mesmo usando preservativo corretamente.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Nenhum método contraceptivo é 100% eficaz. O preservativo tem cerca de 98% de eficácia quando usado corretamente, mas ainda existe uma pequena possibilidade de falha."},
            {"pergunta": "Toda IST apresenta sintomas visíveis.", "resposta_correta": "F", "explicacao": "FALSO. Muita IST (como Clamídia, HPV e HIV) pode ser assintomática por longos períodos. Por isso é importante fazer testes regulares e usar sempre preservativo."},
            {"pergunta": "O preservativo protege contra toda IST.", "resposta_correta": "F", "explicacao": "FALSO. O preservativo protege contra a maioria das IST, mas algumas como HPV e Herpes podem ser transmitidas pelo contato com áreas da pele não cobertas pelo preservativo."},
            {"pergunta": "Lubrificantes à base de óleo são seguros para usar com preservativos de látex.", "resposta_correta": "F", "explicacao": "FALSO. Lubrificantes à base de óleo (como vaselina ou óleos de massagem) podem danificar o látex do preservativo, tornando-o menos eficaz e mais propenso a rasgar. Use sempre lubrificantes à base de água ou silicone com preservativos de látex."},
            {"pergunta": "É possível engravidar tendo relação sexual durante a menstruação.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Embora a probabilidade seja menor, espermatozoides podem sobreviver por vários dias no corpo feminino, e a ovulação pode ocorrer mais cedo em alguns ciclos, levando à gravidez. Sempre use proteção se não deseja engravidar."},
            {"pergunta": "IST é um problema de saúde apenas para pessoas sexualmente ativas com múltiplos parceiros.", "resposta_correta": "F", "explicacao": "FALSO. Qualquer pessoa sexualmente ativa pode contrair uma IST, independentemente do número de parceiros. O risco está na prática sexual desprotegida."},
            {"pergunta": "O sexo anal é uma prática de baixo risco para a transmissão de IST em comparação com o sexo vaginal.", "resposta_correta": "F", "explicacao": "FALSO. O sexo anal é, na verdade, uma prática de alto risco para a transmissão de IST (incluindo o HIV) devido à maior fragilidade do tecido anal, que pode sofrer microlesões mais facilmente. O uso correto do preservativo e lubrificante é essencial."}
        ];

        // Estado do áudio e jogo
        let isMuted = true;
        let videoStarted = false;
        let currentQuestion = null;
        let currentQuestionCallback = null;

        // Elementos de áudio (CORRIGIDO: Removido o type=audio/mpeg/wav das tags, pois é redundante e pode causar erros de carregamento)
        const bgm = document.getElementById('bgm');
        const sfxCoin = document.getElementById('sfxCoin');
        const sfxError = document.getElementById('sfxError');
        const sfxWin = document.getElementById('sfxWin');

        // Estado do jogo
        let gameState = {
            currentPlayer: 1,
            gameEnded: false,
            players: {
                1: { position: 1, coins: 0, bombs: 0 },
                2: { position: 1, coins: 0, bombs: 0 }
            },
            questionsAnswered: 0,
            isSpinning: false,
            currentRotation: 0
        };

        // Configuração padrão
        const defaultConfig = {
            video_title: "Tabuleiro Educativo",
            video_subtitle: "Educação Sexual Interativa",
            game_title: "Tabuleiro Imersivo - Educação Sexual",
            instructions_text: "Dois jogadores competem no tabuleiro circular! Gire a roleta, mova-se pelas casas e responda perguntas educativas!"
        };

        // --- FUNÇÕES DE ÁUDIO ---
        function playAudio(audioElement, volume = 1.0) {
            if (isMuted) return;
            audioElement.currentTime = 0;
            audioElement.volume = volume;
            audioElement.play().catch(e => console.log("Erro ao tocar áudio:", e));
        }

        // --- FUNÇÃO DE MENSAGEM INLINE (mantida) ---
        function showInlineMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(255, 255, 255, 0.95);
                color: #333;
                padding: 20px 30px;
                border-radius: 15px;
                font-size: 1.2rem;
                font-weight: bold;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 2000;
                text-align: center;
                border: 3px solid #667eea;
                backdrop-filter: blur(10px);
            `;
            messageElement.textContent = message;
            document.body.appendChild(messageElement);
            
            setTimeout(() => {
                messageElement.style.opacity = '0';
                messageElement.style.transform = 'translate(-50%, -50%) scale(0.8)';
                setTimeout(() => {
                    if (document.body.contains(messageElement)) {
                        document.body.removeChild(messageElement);
                    }
                }, 300);
            }, 2000);
        }

        function toggleMute() {
            isMuted = !isMuted;
            document.getElementById('muteButton').textContent = isMuted ? '🔇' : '🔊';
            
            bgm.muted = isMuted;
            sfxCoin.muted = isMuted;
            sfxError.muted = isMuted;
            sfxWin.muted = isMuted;

            if (!isMuted && bgm.paused) {
                bgm.play().catch(e => console.log("Erro ao iniciar BGM:", e));
            }
        }

        // --- FUNÇÕES DE VÍDEO ---
        function startVideo() {
            const videoThumbnail = document.getElementById('videoThumbnail');
            const video = document.getElementById('introVideo');
            const videoControls = document.getElementById('videoControls');
            const muteButton = document.getElementById('muteButton');
            
            videoThumbnail.style.display = 'none';
            video.style.display = 'block';
            video.classList.add('fade-in');
            
            video.play();
            videoStarted = true;
            
            setTimeout(() => {
                videoControls.style.display = 'flex';
                videoControls.classList.add('slide-up');
                muteButton.style.display = 'block';
                muteButton.classList.add('fade-in');
            }, 1000);
            
            video.addEventListener('ended', function() {
                setTimeout(() => {
                    startGame();
                }, 1000);
            });
        }

        function skipVideo() {
            startGame();
        }

        function startGame() {
            document.getElementById('splashScreen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('gameContainer').style.display = 'block';
                document.getElementById('introVideo').pause();
                
                if (!isMuted) {
                    bgm.play().catch(e => console.log("Erro ao iniciar BGM:", e));
                }
                
                document.getElementById('muteButton').style.display = 'block';
                initializeFullGame();
            }, 500);
        }

        // --- FUNÇÕES DE PERSONAGEM ---
        function setAvatarImage(avatarElement, characterType, state) {
            const imageKey = `${characterType}_${state}`;
            const imagePath = CHARACTER_IMAGES[imageKey];
            
            if (imagePath && avatarElement) {
                avatarElement.style.backgroundImage = `url('${imagePath}')`;
                avatarElement.style.backgroundSize = 'cover';
                avatarElement.style.backgroundPosition = 'center';
            }
        }

        function showCharacterForHouse(housePosition) {
            const characterCard = document.getElementById('characterCard');
            const avatar = document.getElementById('characterAvatar');
            const message = document.getElementById('characterMessage');
            
            if (characterCard && avatar && message) {
                // Determina o tipo de personagem baseado na casa (par/ímpar)
                const characterType = housePosition % 2 === 0 ? 'girl' : 'boy';
                const characterName = characterType === 'girl' ? 'Ana' : 'João';
                
                // Remove classes anteriores
                characterCard.classList.remove('happy', 'sad');
                avatar.classList.remove('happy', 'sad');
                message.classList.remove('happy', 'sad');
                
                // Define a imagem e mensagem do personagem (Pergunta)
                setAvatarImage(avatar, characterType, 'question');
                message.textContent = `Olá! Eu sou ${characterName}! 😊`;
                
                // Mostra o card
                characterCard.classList.add('show');
                
                // Remove após 2 segundos
                setTimeout(() => {
                    characterCard.classList.remove('show');
                }, 2000);
            }
        }

        function showCharacterFeedback(isCorrect, characterType = 'girl') {
            const characterCard = document.getElementById('characterCard');
            const avatar = document.getElementById('characterAvatar');
            const message = document.getElementById('characterMessage');
            
            if (characterCard && avatar && message) {
                characterCard.classList.remove('happy', 'sad');
                avatar.classList.remove('happy', 'sad');
                message.classList.remove('happy', 'sad');
                
                if (isCorrect) {
                    characterCard.classList.add('happy');
                    avatar.classList.add('happy');
                    message.classList.add('happy');
                    message.textContent = 'Parabéns! 😊';
                    setAvatarImage(avatar, characterType, 'win');
                    playAudio(sfxWin, 0.8);
                } else {
                    characterCard.classList.add('sad');
                    avatar.classList.add('sad');
                    message.classList.add('sad');
                    message.textContent = 'Que pena! 😔';
                    setAvatarImage(avatar, characterType, 'lose');
                    playAudio(sfxError, 0.5);
                }
                
                characterCard.classList.add('show');
                
                setTimeout(() => {
                    characterCard.classList.remove('show', 'happy', 'sad');
                    avatar.classList.remove('happy', 'sad');
                    message.classList.remove('happy', 'sad');
                    setAvatarImage(avatar, characterType, 'default');
                    message.textContent = 'Boa sorte!';
                }, 3000);
            }
        }

        // --- SISTEMA DE PERGUNTAS EDUCATIVAS ---
        function sortearPergunta() {
            const todasPerguntas = [...perguntasInformativas, ...perguntasRisco];
            const indice = Math.floor(Math.random() * todasPerguntas.length);
            return todasPerguntas[indice];
        }

        function mostrarPergunta(pergunta, onAnswer) {
            currentQuestion = pergunta;
            currentQuestionCallback = onAnswer;
            
            document.getElementById('questionText').textContent = pergunta.pergunta;
            document.getElementById('questionModal').style.display = 'flex';
        }

        function answerQuestion(resposta) {
            if (!currentQuestion) return;
            
            const acertou = resposta === currentQuestion.resposta_correta;
            const tipoPersonagem = gameState.players[gameState.currentPlayer].position % 2 === 0 ? 'girl' : 'boy';
            
            document.getElementById('questionModal').style.display = 'none';
            
            showCharacterFeedback(acertou, tipoPersonagem);
            
            setTimeout(() => {
                document.getElementById('explanationText').textContent = currentQuestion.explicacao;
                document.getElementById('explanationModal').style.display = 'flex';
            }, 1500);
            
            if (currentQuestionCallback) {
                currentQuestionCallback(acertou);
            }
        }

        function closeExplanation() {
            document.getElementById('explanationModal').style.display = 'none';
            currentQuestion = null;
            currentQuestionCallback = null;
        }

        // --- FUNÇÕES DO TABULEIRO ---
        function initializeBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            const radius = 250;
            const centerX = 300;
            const centerY = 300;

            for (let i = 1; i <= 40; i++) {
                const square = document.createElement('div');
                square.className = 'square';
                square.id = `square-${i}`;
                
                const angle = ((i - 1) / 40) * 2 * Math.PI - Math.PI / 2;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                square.style.left = `${x - 40}px`;
                square.style.top = `${y - 50}px`;
                square.style.animationDelay = `${i * 0.1}s`;
                
                let isGirl = i % 2 === 0;
                let charIcon = isGirl ? '👧' : '👦';
                let labelText;

                if (i === 1) {
                    square.classList.add('start');
                    charIcon = '🚀';
                    labelText = 'INÍCIO';
                } else if (i === 40) {
                    square.classList.add('finish');
                    charIcon = '🏆';
                    labelText = 'FIM';
                } else {
                    // Todas as outras casas têm perguntas V/F
                    square.classList.add('vf');
                    charIcon = '🎯';
                    labelText = 'V/F';
                }

                const character = document.createElement('div');
                character.className = 'square-character';
                // Define a imagem de fundo para o elemento da casa (usando imagem default)
                setAvatarImage(character, isGirl ? 'girl' : 'boy', 'default'); 
                
                const label = document.createElement('div');
                label.className = 'square-number';
                label.textContent = labelText;
                square.appendChild(character);
                square.appendChild(label);

                if (i === 1) {
                    const player1 = document.createElement('div');
                    player1.className = 'player player1';
                    player1.textContent = '1';
                    square.appendChild(player1);
                    
                    const player2 = document.createElement('div');
                    player2.className = 'player player2';
                    player2.textContent = '2';
                    square.appendChild(player2);
                }
                
                board.appendChild(square);
            }
        }

        // Girar a roleta
        function spinRoulette() {
            if (gameState.gameEnded || gameState.isSpinning) return;
            
            gameState.isSpinning = true;
            const roulette = document.getElementById('roulette');
            const result = document.getElementById('rouletteResult');
            
            roulette.classList.add('spinning');
            playAudio(sfxCoin, 0.8);
            
            setTimeout(() => {
                const roll = Math.floor(Math.random() * 6) + 1;
                result.textContent = roll;
                roulette.classList.remove('spinning');
                gameState.isSpinning = false;
                
                movePlayer(roll);
            }, 2000);
        }

        // Mover o jogador
        function movePlayer(steps) {
            const player = gameState.players[gameState.currentPlayer];
            const oldPosition = player.position;
            
            player.position = Math.min(player.position + steps, 40);
            
            const currentSquare = document.getElementById(`square-${oldPosition}`);
            const playerElement = currentSquare.querySelector(`.player.player${gameState.currentPlayer}`);
            if (playerElement) { 
                playerElement.remove(); 
            }
            
            const newSquare = document.getElementById(`square-${player.position}`);
            const newPlayer = document.createElement('div');
            newPlayer.className = `player player${gameState.currentPlayer}`;
            newPlayer.textContent = gameState.currentPlayer;
            newPlayer.style.transform = 'scale(0)';
            newSquare.appendChild(newPlayer);
            
            setTimeout(() => {
                newPlayer.style.transform = 'scale(1)';
                newPlayer.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
            }, 100);

            if (player.position >= 40) {
                setTimeout(() => {
                    showGameEnd();
                }, 1000);
                return;
            }

            // Todas as casas (exceto a primeira) têm perguntas
            if (player.position > 1) {
                // Primeiro mostra o personagem da casa (Card Suspenso)
                setTimeout(() => {
                    showCharacterForHouse(player.position);
                }, 500);
                
                // Depois mostra a pergunta
                setTimeout(() => {
                    showQuestion();
                }, 2500);
            } else {
                setTimeout(() => {
                    nextPlayer();
                }, 1000);
            }

            updatePlayerDisplay();
        }

        function nextPlayer() {
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            updatePlayerDisplay();
            
            showInlineMessage(`Vez do Jogador ${gameState.currentPlayer}! 🎲`);
        }

        function updatePlayerDisplay() {
            const player1Stats = document.getElementById('player1Stats');
            const player2Stats = document.getElementById('player2Stats');
            
            if (player1Stats) {
                const p1 = gameState.players[1];
                player1Stats.innerHTML = `
                    <div class="player-name ${gameState.currentPlayer === 1 ? 'active' : ''}">
                        Jogador 1 - Casa ${p1.position}
                    </div>
                    <div class="player-coins">🪙 ${p1.coins}</div>
                    <div class="player-bombs">💣 ${p1.bombs}</div>
                `;
                
                if (gameState.currentPlayer === 1) {
                    player1Stats.classList.add('active');
                } else {
                    player1Stats.classList.remove('active');
                }
            }
            
            if (player2Stats) {
                const p2 = gameState.players[2];
                player2Stats.innerHTML = `
                    <div class="player-name ${gameState.currentPlayer === 2 ? 'active' : ''}">
                        Jogador 2 - Casa ${p2.position}
                    </div>
                    <div class="player-coins">🪙 ${p2.coins}</div>
                    <div class="player-bombs">💣 ${p2.bombs}</div>
                `;
                
                if (gameState.currentPlayer === 2) {
                    player2Stats.classList.add('active');
                } else {
                    player2Stats.classList.remove('active');
                }
            }
        }

        function showQuestion() {
            const pergunta = sortearPergunta();
            mostrarPergunta(pergunta, (acertou) => {
                processAnswer(acertou);
            });
        }

        function processAnswer(acertou) {
            const player = gameState.players[gameState.currentPlayer];
            
            if (acertou) {
                player.coins += 10;
                showCoinAnimation();
                playAudio(sfxCoin, 0.7);
            } else {
                player.bombs += 1;
                showBombAnimation();
                playAudio(sfxError, 0.5);
            }
            
            gameState.questionsAnswered += 1;
            updatePlayerDisplay();
            
            setTimeout(() => {
                nextPlayer();
            }, 2000);
        }

        function showCoinAnimation() {
            const coinElement = document.createElement('div');
            coinElement.className = 'coin-animation';
            coinElement.textContent = '🪙';
            document.body.appendChild(coinElement);
            
            setTimeout(() => {
                document.body.removeChild(coinElement);
            }, 1000);
        }

        function showBombAnimation() {
            const bombElement = document.createElement('div');
            bombElement.className = 'bomb-explosion';
            bombElement.textContent = '💥';
            document.body.appendChild(bombElement);
            
            setTimeout(() => {
                document.body.removeChild(bombElement);
            }, 1000);
        }

        function showGameEnd() {
            gameState.gameEnded = true;
            const winner = gameState.currentPlayer;
            const winnerData = gameState.players[winner];
            
            setTimeout(() => {
                showInlineMessage(`🏆 Jogador ${winner} VENCEU! 🎉\n\n🪙 Moedas: ${winnerData.coins}\n💣 Bombas: ${winnerData.bombs}`);
                
                setTimeout(() => {
                    const restart = confirm(`Jogador ${winner} chegou ao fim!\n\nDeseja jogar novamente?`);
                    if (restart) {
                        restartGame();
                    }
                }, 3000);
            }, 500);
        }

        function restartGame() {
            gameState = {
                currentPlayer: 1,
                gameEnded: false,
                players: {
                    1: { position: 1, coins: 0, bombs: 0 },
                    2: { position: 1, coins: 0, bombs: 0 }
                },
                questionsAnswered: 0,
                isSpinning: false,
                currentRotation: 0
            };
            
            updatePlayerDisplay();
            initializeBoard();
            
            document.getElementById('rouletteResult').textContent = '?';
        }

        // --- INICIALIZAÇÃO DO JOGO ---
        function initializeFullGame() {
            console.log("Tabuleiro educativo inicializado!");
            initializeBoard();
            updatePlayerDisplay();
        }

        // --- CONFIGURAÇÃO DO ELEMENT SDK (mantida) ---
        async function render(config) {
            const videoTitle = config.video_title || defaultConfig.video_title;
            const videoSubtitle = config.video_subtitle || defaultConfig.video_subtitle;
            const gameTitle = config.game_title || defaultConfig.game_title;
            const instructionsText = config.instructions_text || defaultConfig.instructions_text;

            const titleElement = document.querySelector('.video-title');
            const subtitleElement = document.querySelector('.video-subtitle');
            
            if (titleElement) titleElement.textContent = videoTitle;
            if (subtitleElement) subtitleElement.textContent = videoSubtitle;
            
            document.getElementById('gameTitle').textContent = gameTitle;
            document.getElementById('instructionsText').textContent = instructionsText;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || '#667eea',
                        set: (value) => {
                            config.primary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || 'Segoe UI',
                    set: (value) => {
                        config.font_family = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        config.font_size = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["video_title", config.video_title || defaultConfig.video_title],
                ["video_subtitle", config.video_subtitle || defaultConfig.video_subtitle],
                ["game_title", config.game_title || defaultConfig.game_title],
                ["instructions_text", config.instructions_text || defaultConfig.instructions_text]
            ]);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    render,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });
    </script>
 </body>
</html>
