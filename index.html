<script>
    // ==============================================
    // CONFIGURAÃ‡ÃƒO DE ESTADO E MAPEAMENTO DE ASSETS
    // ==============================================

    // Mapeamento das imagens personalizadas (caminhos para a pasta assets/img/)
    const CHARACTER_IMAGES = {
        'girl_default': 'assets/img/3.jpg',
        'girl_question': 'assets/img/2.jpg',
        'girl_win': 'assets/img/5.jpg',
        'girl_lose': 'assets/img/6.jpg',
        'boy_default': 'assets/img/4.jpg', 
        'boy_question': 'assets/img/7.jpg',
        'boy_win': 'assets/img/4.jpg',
        'boy_lose': 'assets/img/7.jpg'
    };

    // Estado do jogo
    let gameState = {
        currentPlayer: 1,
        players: {
            1: { position: 1, coins: 0, bombs: 0 },
            2: { position: 1, coins: 0, bombs: 0 }
        },
        gameEnded: false
    };
    let currentQuestion = null;
    let currentQuestionType = null;
    let isMuted = true; // Inicia mutado para compliance com autoplay

    // ReferÃªncias de Ãudio (JÃ¡ referenciadas no HTML)
    const bgm = document.getElementById('bgm');
    const sfxCoin = document.getElementById('sfxCoin');
    const sfxError = document.getElementById('sfxError');
    const sfxWin = document.getElementById('sfxWin');

    // ==============================================
    // FUNÃ‡Ã•ES DE ÃUDIO E VISUALIZAÃ‡ÃƒO
    // ==============================================

    function playAudio(audioElement, volume = 1.0) {
        if (isMuted) return;
        audioElement.currentTime = 0;
        audioElement.volume = volume;
        audioElement.play().catch(e => console.log("Erro ao tocar Ã¡udio:", e));
    }

    function toggleMute() { 
        isMuted = !isMuted; 
        document.getElementById('muteButton').textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
        bgm.muted = isMuted; 
        sfxCoin.muted = isMuted; 
        sfxError.muted = isMuted; 
        sfxWin.muted = isMuted;
        if (!isMuted && bgm.paused) { 
            bgm.play().catch(e => console.log("Erro ao iniciar BGM:", e)); 
        }
    }

    // Configura o visual do avatar baseado no estado
    function setAvatarImage(avatarElement, type, state) {
        const isGirl = type === 'girl';
        let imageKey = `${isGirl ? 'girl' : 'boy'}_${state}`;
        
        if (state === 'default') {
             imageKey = isGirl ? 'girl_default' : 'boy_default';
        } else if (state === 'question') {
             imageKey = isGirl ? 'girl_question' : 'boy_question';
        } else if (state === 'win') {
             imageKey = isGirl ? 'girl_win' : 'boy_win';
        } else if (state === 'lose') {
             imageKey = isGirl ? 'girl_lose' : 'boy_lose';
        }

        avatarElement.style.backgroundImage = `url(${CHARACTER_IMAGES[imageKey]})`;
    }

    // Mostrar card do personagem
    function showCharacterCard(position, isQuestion = true) {
        const square = document.getElementById(`square-${position}`);
        const characterCard = square.querySelector('.character-card');
        
        if (characterCard) {
            characterCard.classList.add('show');
            const avatar = characterCard.querySelector('.character-avatar');
            const isGirl = position % 2 === 0;

            setAvatarImage(avatar, isGirl ? 'girl' : 'boy', isQuestion ? 'question' : 'default');
        }
    }

    // Atualizar reaÃ§Ã£o do personagem
    function updateCharacterReaction(position, isCorrect) {
        const square = document.getElementById(`square-${position}`);
        const characterCard = square.querySelector('.character-card');
        if (characterCard) {
            const avatar = characterCard.querySelector('.character-avatar');
            const message = characterCard.querySelector('.character-message');
            const isGirl = position % 2 === 0;
            const type = isGirl ? 'girl' : 'boy';

            characterCard.classList.remove('happy', 'sad');
            avatar.classList.remove('happy', 'sad');
            message.classList.remove('happy', 'sad');
            
            if (isCorrect) {
                characterCard.classList.add('happy');
                avatar.classList.add('happy');
                message.classList.add('happy');
                message.textContent = 'ParabÃ©ns! ðŸ˜Š';
                setAvatarImage(avatar, type, 'win');
            } else {
                characterCard.classList.add('sad');
                avatar.classList.add('sad');
                message.classList.add('sad');
                message.textContent = 'Que pena! ðŸ˜”';
                setAvatarImage(avatar, type, 'lose');
            }
            
            characterCard.classList.add('show');
            
            // Resetar para estado neutro apÃ³s 3 segundos
            setTimeout(() => {
                characterCard.classList.remove('happy', 'sad');
                avatar.classList.remove('happy', 'sad');
                message.classList.remove('happy', 'sad');
                message.textContent = 'Boa sorte!';
                setAvatarImage(avatar, type, 'default');
            }, 3000);
        }
    }

    function updatePlayerDisplay() {
        const player1 = gameState.players[1];
        const player2 = gameState.players[2];
        document.getElementById('player1Position').textContent = player1.position;
        document.getElementById('player1Coins').textContent = player1.coins;
        document.getElementById('player1Bombs').textContent = player1.bombs;
        document.getElementById('player2Position').textContent = player2.position;
        document.getElementById('player2Coins').textContent = player2.coins;
        document.getElementById('player2Bombs').textContent = player2.bombs;

        const player1Card = document.getElementById('player1Card');
        const player2Card = document.getElementById('player2Card');
        const turnIndicator = document.getElementById('turnIndicator');

        if (gameState.currentPlayer === 1) {
            player1Card.classList.add('active');
            player2Card.classList.remove('active');
            turnIndicator.textContent = `Vez do Jogador 1`;
        } else {
            player1Card.classList.remove('active');
            player2Card.classList.add('active');
            turnIndicator.textContent = `Vez do Jogador 2`;
        }
    }

    // ==============================================
    // FUNÃ‡ÃƒO DE INÃCIO DO JOGO (CHAMADA PELO BOTÃƒO)
    // ==============================================
    function startGame() {
        const splashScreen = document.getElementById('splashScreen');
        const mainGameContainer = document.getElementById('mainGameContainer');
        const introVideo = document.getElementById('introVideo');

        // 1. Oculta a tela de introduÃ§Ã£o com transiÃ§Ã£o
        splashScreen.style.opacity = '0';
        introVideo.pause();

        setTimeout(() => {
            splashScreen.style.display = 'none';
            
            // 2. EXIBE O CONTÃŠINER PRINCIPAL DO JOGO
            mainGameContainer.style.display = 'block';

            // 3. Tenta iniciar a mÃºsica
            if (!isMuted) {
                bgm.play().catch(e => console.log("Erro ao iniciar BGM:", e));
            }

            // 4. Inicializa o tabuleiro APÃ“S a tela ser visÃ­vel
            initializeBoard();
            
        }, 500); // Aguarda o fim da transiÃ§Ã£o de 0.5s
    }

    // ==============================================
    // LÃ“GICA DO TABULEIRO E JOGO
    // ==============================================

    function initializeBoard() {
        const board = document.getElementById('gameBoard');
        board.innerHTML = '';

        const radius = 250; 
        const centerX = 300; 
        const centerY = 300; 

        for (let i = 1; i <= 40; i++) {
            const square = document.createElement('div');
            square.className = 'square';
            square.id = `square-${i}`;
            
            // Calcular posiÃ§Ã£o em cÃ­rculo
            const angle = ((i - 1) / 40) * 2 * Math.PI - Math.PI / 2;
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            
            square.style.left = `${x - 40}px`; 
            square.style.top = `${y - 50}px`; 
            square.style.animationDelay = `${i * 0.1}s`; 
            
            let isGirl = i % 2 === 0;
            let charIcon = isGirl ? 'ðŸ‘§' : 'ðŸ‘¦';

            if (i === 1) {
                square.classList.add('start');
                charIcon = 'ðŸš€';
            } else if (i === 40) {
                square.classList.add('finish');
                charIcon = 'ðŸ†';
            } else if (i % 5 === 0 || i % 7 === 0) {
                square.classList.add('vf');
            } else {
                square.classList.add('normal');
            }

            const character = document.createElement('div');
            character.className = 'square-character';
            character.textContent = charIcon;
            const label = document.createElement('div');
            label.className = 'square-number';
            label.textContent = (i === 1) ? 'INÃCIO' : (i === 40) ? 'FIM' : (square.classList.contains('vf') ? 'V/F' : i);
            square.appendChild(character);
            square.appendChild(label);

            // Adicionar card de reaÃ§Ã£o para casas com perguntas
            if (i !== 1 && i !== 40) {
                const characterCard = document.createElement('div');
                characterCard.className = 'character-card';
                characterCard.id = `character-${i}`;
                
                const avatar = document.createElement('div');
                avatar.className = 'character-avatar';
                
                // Inicializa a imagem default no avatar
                setAvatarImage(avatar, isGirl ? 'girl' : 'boy', 'default');
                
                const message = document.createElement('div');
                message.className = 'character-message';
                message.textContent = 'Boa sorte!';
                
                characterCard.appendChild(avatar);
                characterCard.appendChild(message);
                square.appendChild(characterCard);
                // Mostra o card neutro
                showCharacterCard(i, false); 
            }

            // Adicionar jogadores nas posiÃ§Ãµes iniciais
            if (i === 1) {
                const player1 = document.createElement('div');
                player1.className = 'player player1';
                player1.textContent = '1';
                square.appendChild(player1);

                const player2 = document.createElement('div');
                player2.className = 'player player2';
                player2.textContent = '2';
                player2.style.right = '-30px'; 
                square.appendChild(player2);
            }

            board.appendChild(square);
        }
    }

    // Girar a roleta
    function spinRoulette() {
        if (gameState.gameEnded) return;
        
        const roulette = document.getElementById('roulette');
        const result = document.getElementById('rouletteResult');
        
        roulette.classList.add('spinning');
        playAudio(sfxCoin, 0.8);
        
        setTimeout(() => {
            const roll = Math.floor(Math.random() * 6) + 1;
            result.textContent = roll;
            roulette.classList.remove('spinning');
            
            movePlayer(roll);
        }, 2000);
    }

    // Mover o jogador
    function movePlayer(steps) {
        const player = gameState.players[gameState.currentPlayer];
        const oldPosition = player.position;
        
        const currentSquare = document.getElementById(`square-${oldPosition}`);
        const playerElement = currentSquare.querySelector(`.player.player${gameState.currentPlayer}`);
        if (playerElement) {
            playerElement.remove();
        }

        player.position = Math.min(player.position + steps, 40);
        
        const newSquare = document.getElementById(`square-${player.position}`);
        const newPlayer = document.createElement('div');
        newPlayer.className = `player player${gameState.currentPlayer}`;
        newPlayer.textContent = gameState.currentPlayer;
        newPlayer.style.transform = 'scale(0)';
        
        if (gameState.currentPlayer === 2) {
            newPlayer.style.right = '-30px';
        } else {
            newPlayer.style.right = '-10px';
        }
        
        newSquare.appendChild(newPlayer);
        
        setTimeout(() => {
            newPlayer.style.transform = 'scale(1)';
            newPlayer.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
        }, 100);

        updatePlayerDisplay();

        if (player.position === 40) {
            gameState.gameEnded = true;
            const playerName = gameState.currentPlayer === 1 ? 
                (document.getElementById('player1Name').textContent || 'Jogador 1') :
                (document.getElementById('player2Name').textContent || 'Jogador 2');
            
            setTimeout(() => {
                showWinner(playerName);
                playAudio(sfxWin, 1.0);
            }, 500);
            return;
        }

        setTimeout(() => {
            const square = document.getElementById(`square-${player.position}`);
            if (square.classList.contains('vf')) {
                showCharacterCard(player.position, true); 
                showVFQuestion();
            } else if (square.classList.contains('normal')) {
                showCharacterCard(player.position, true);
                showInformativeQuestion();
            }
        }, 500);
    }

    // Alternar jogador
    function switchPlayer() {
        gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
        updatePlayerDisplay();
    }

    // Mostrar vencedor
    function showWinner(playerName) {
        const winnerDiv = document.createElement('div');
        winnerDiv.className = 'winner-announcement';
        winnerDiv.innerHTML = `ðŸŽ‰ ${playerName} VENCEU! ðŸŽ‰<br>ParabÃ©ns por completar o tabuleiro de educaÃ§Ã£o sexual!`;
        
        const gameInfo = document.querySelector('.game-info');
        gameInfo.appendChild(winnerDiv);

        setTimeout(() => {
            showCustomModal('ðŸ† Fim de Jogo!', `${playerName} chegou primeiro ao final! ParabÃ©ns por aprender sobre educaÃ§Ã£o sexual de forma divertida!`, [
                {text: 'Jogar Novamente', action: () => { 
                    gameState = {
                        currentPlayer: 1,
                        players: {
                            1: { position: 1, coins: 0, bombs: 0 },
                            2: { position: 1, coins: 0, bombs: 0 }
                        },
                        gameEnded: false
                    };
                    initializeBoard(); 
                    updatePlayerDisplay();
                    winnerDiv.remove();
                    closeModal(); 
                }}
            ]);
        }, 2000);
    }

    // Mostrar pergunta informativa
    function showInformativeQuestion() {
        const randomIndex = Math.floor(Math.random() * perguntasInformativas.length);
        currentQuestion = perguntasInformativas[randomIndex];
        currentQuestionType = 'informative';

        document.getElementById('modalTitle').textContent = 'Verdadeiro ou Falso?';
        document.getElementById('modalQuestion').textContent = currentQuestion.pergunta;
        document.getElementById('modalButtons').innerHTML = `
            <div class="vf-buttons">
                <button class="btn btn-true" onclick="checkVFAnswer('V')">Verdadeiro</button>
                <button class="btn btn-false" onclick="checkVFAnswer('F')">Falso</button>
            </div>
        `;
        
        document.getElementById('questionModal').style.display = 'flex';
    }

    // Mostrar pergunta V/F
    function showVFQuestion() {
        const randomIndex = Math.floor(Math.random() * perguntasRisco.length);
        currentQuestion = perguntasRisco[randomIndex];
        currentQuestionType = 'vf';

        document.getElementById('modalTitle').textContent = 'Pergunta de Risco - V/F?';
        document.getElementById('modalQuestion').textContent = currentQuestion.pergunta;
        document.getElementById('modalButtons').innerHTML = `
            <div class="vf-buttons">
                <button class="btn btn-true" onclick="checkVFAnswer('V')">Verdadeiro</button>
                <button class="btn btn-false" onclick="checkVFAnswer('F')">Falso</button>
            </div>
        `;
        
        document.getElementById('questionModal').style.display = 'flex';
    }

    // Criar efeito de explosÃ£o
    function createExplosion() {
        const overlay = document.getElementById('explosionOverlay');
        const particlesContainer = document.getElementById('explosionParticles');
        const gameContainer = document.getElementById('mainGameContainer');
        
        overlay.style.display = 'block';
        gameContainer.classList.add('screen-shake');
        
        particlesContainer.innerHTML = '';
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const angle = (i / 20) * 2 * Math.PI;
            const distance = Math.random() * 200 + 50;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            
            particle.style.setProperty('--end-x', `${x}px`);
            particle.style.setProperty('--end-y', `${y}px`);
            particle.style.animation = `particle-explosion 1.5s ease-out forwards`;
            particle.style.animationDelay = `${Math.random() * 0.3}s`;
            
            const colors = ['#ff4500', '#ff6b00', '#ff8c00', '#ffa500', '#ffb347'];
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            particlesContainer.appendChild(particle);
        }
        
        setTimeout(() => {
            overlay.style.display = 'none';
            gameContainer.classList.remove('screen-shake');
            particlesContainer.innerHTML = '';
        }, 1500);
    }

    // Verificar resposta V/F
    function checkVFAnswer(answer) {
        const isCorrect = answer === currentQuestion.resposta_correta;
        const player = gameState.players[gameState.currentPlayer];
        
        updateCharacterReaction(player.position, isCorrect);
        
        if (isCorrect) {
            player.coins++;
            document.getElementById('answerTitle').textContent = 'âœ… Correto! +1 Moeda';
            playAudio(sfxCoin, 0.5);
        } else {
            player.bombs++;
            document.getElementById('answerTitle').textContent = 'âŒ Incorreto! +1 Bomba';
            
            setTimeout(() => {
                createExplosion();
                playAudio(sfxError, 1.0);
            }, 500);
        }
        
        document.getElementById('answerText').textContent = currentQuestion.explicacao;
        updatePlayerDisplay();
        
        document.getElementById('questionModal').style.display = 'none';
        document.getElementById('answerModal').style.display = 'flex';
    }

    // Fechar modal
    function closeModal() {
        document.getElementById('questionModal').style.display = 'none';
        document.getElementById('answerModal').style.display = 'none';
        
        if (!gameState.gameEnded) {
            switchPlayer();
        }
    }

    // Mostrar modal customizado
    function showCustomModal(title, message, buttons) {
        document.getElementById('answerTitle').textContent = title;
        document.getElementById('answerText').textContent = message;
        
        const buttonContainer = document.querySelector('#answerModal .modal-buttons');
        buttonContainer.innerHTML = '';
        
        buttons.forEach(button => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-primary';
            btn.textContent = button.text;
            btn.onclick = button.action;
            buttonContainer.appendChild(btn);
        });
        
        document.getElementById('answerModal').style.display = 'flex';
    }


    // FunÃ§Ãµes de demonstraÃ§Ã£o (nÃ£o utilizadas no jogo principal, mas mantidas para compatibilidade com SDK)
    function showAnswer() { closeModal(); } 
    function render(config) { /* LÃ³gica de renderizaÃ§Ã£o do SDK */ }
    function mapToCapabilities(config) { /* Mapeamento de capacidades do SDK */ }
    function mapToEditPanelValues(config) { /* Mapeamento do painel de ediÃ§Ã£o do SDK */ }


    // ==============================================
    // BANCO DE PERGUNTAS (V/F) - COMPLETO
    // ==============================================

    const perguntasInformativas = [
        {"pergunta": "Ã‰ seguro rasgar a embalagem do preservativo com os dentes para ser mais rÃ¡pido.", "resposta_correta": "F", "explicacao": "FALSO. Rasgar com os dentes ou unhas pode causar microfuros invisÃ­veis que anulam a proteÃ§Ã£o. Sempre use os dedos para rasgar na borda serrilhada. Guarde em locais frescos, longe do calor."},
        {"pergunta": "Se colocar o preservativo do lado errado e ele tocar no pÃªnis, posso virÃ¡-lo e usar normalmente.", "resposta_correta": "F", "explicacao": "FALSO. Se comeÃ§ou do lado errado e tocou no pÃªnis, jogue fora e pegue outro! Fluidos prÃ©-ejaculatÃ³rios podem ter entrado em contato com a parte interna."},
        {"pergunta": "Ã‰ importante apertar a pontinha do preservativo antes de desenrolar para tirar o ar.", "resposta_correta": "V", "explicacao": "VERDADEIRO. A pontinha Ã© o reservatÃ³rio do esperma. Se nÃ£o tirar o ar, a pressÃ£o na ejaculaÃ§Ã£o pode estourar o preservativo."},
        {"pergunta": "O preservativo protege mesmo se nÃ£o desenrolar atÃ© a base do pÃªnis.", "resposta_correta": "F", "explicacao": "FALSO. Deve desenrolar completamente atÃ© a base. Ã‰ ali que a borda forma uma 'barreira' que ajuda a prender o esperma e manter a proteÃ§Ã£o."},
        {"pergunta": "Posso retirar o preservativo a qualquer momento apÃ³s a ejaculaÃ§Ã£o sem cuidados especiais.", "resposta_correta": "F", "explicacao": "FALSO. Deve ser rÃ¡pido e cuidadoso imediatamente apÃ³s a ejaculaÃ§Ã£o, antes do pÃªnis amolecer. Segure a borda na base e retire devagar."},
        {"pergunta": "O preservativo feminino pode ser colocado horas antes da relaÃ§Ã£o sexual.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Esta Ã© uma grande vantagem! Pode ser colocado com antecedÃªncia, tirando a pressÃ£o do momento e garantindo que a proteÃ§Ã£o jÃ¡ estÃ¡ pronta."},
        {"pergunta": "Ã‰ normal o preservativo feminino ficar frouxo ou torcido dentro do canal vaginal.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Essa folga Ã© normal e permite que ele se ajuste durante a relaÃ§Ã£o. O importante Ã© que o anel menor esteja bem fundo e o maior cubra a entrada."},
        {"pergunta": "Posso usar preservativo masculino e feminino ao mesmo tempo para maior proteÃ§Ã£o.", "resposta_correta": "F", "explicacao": "FALSO. NUNCA use os dois juntos! O atrito entre os materiais pode rasgar ambos os preservativos. Escolha apenas um."},
        {"pergunta": "O diafragma Ã© considerado um mÃ©todo contraceptivo de barreira.", "resposta_correta": "V", "explicacao": "VERDADEIRO. O diafragma (usado com espermicida) e os preservativos sÃ£o exemplos de mÃ©todos de barreira que impedem fisicamente a passagem dos espermatozoides."},
        {"pergunta": "A pÃ­lula do dia seguinte pode ser usada como mÃ©todo contraceptivo regular.", "resposta_correta": "F", "explicacao": "FALSO. Ã‰ apenas para emergÃªncias. Usar regularmente causa desequilÃ­brios hormonais e Ã© menos eficaz que mÃ©todos contraceptivos regulares."},
        {"pergunta": "O preservativo protege contra todas as IST sem exceÃ§Ã£o.", "resposta_correta": "F", "explicacao": "FALSO. Protege contra a maioria, mas IST como HPV e Herpes podem ser transmitidas pelo contato com Ã¡reas da pele nÃ£o cobertas pelo preservativo."},
        {"pergunta": "O duche vaginal apÃ³s a relaÃ§Ã£o Ã© eficaz para prevenir gravidez e IST.", "resposta_correta": "F", "explicacao": "FALSO. O duche pode empurrar bactÃ©rias para dentro do Ãºtero e desequilibra a flora vaginal, aumentando o risco de infecÃ§Ãµes."},
        {"pergunta": "O preservativo Ã© o Ãºnico mÃ©todo que oferece dupla proteÃ§Ã£o: contra gravidez e IST.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Ã‰ o Ãºnico mÃ©todo contraceptivo que tambÃ©m oferece proteÃ§Ã£o contra a maioria das InfecÃ§Ãµes Sexualmente TransmissÃ­veis."},
        {"pergunta": "O consentimento dado no inÃ­cio da relaÃ§Ã£o vale para toda a atividade sexual.", "resposta_correta": "F", "explicacao": "FALSO. O consentimento deve ser contÃ­nuo e pode ser retirado a qualquer momento. Deve ser confirmado em cada etapa da atividade sexual."},
        {"pergunta": "Libido e desejo sexual sÃ£o exatamente a mesma coisa.", "resposta_correta": "F", "explicacao": "FALSO. Libido Ã© o impulso sexual geral (o 'motor'), enquanto desejo sexual Ã© a vontade especÃ­fica de ter atividade sexual (a 'vontade de dirigir')."},
        {"pergunta": "Sexting sem consentimento pode ter consequÃªncias legais graves.", "resposta_correta": "V", "explicacao": "VERDADEIRO. A distribuiÃ§Ã£o nÃ£o consensual de conteÃºdo Ã­ntimo (pornografia de vinganÃ§a) Ã© ilegal e pode ter graves consequÃªncias emocionais e legais."},
        {"pergunta": "OrientaÃ§Ã£o Sexual e Identidade de GÃªnero referem-se ao mesmo conceito.", "resposta_correta": "F", "explicacao": "FALSO. OrientaÃ§Ã£o Sexual Ã© sobre atraÃ§Ã£o por outras pessoas. Identidade de GÃªnero Ã© o sentido interno de ser homem, mulher, ambos, nenhum ou outro gÃªnero."},
        {"pergunta": "Uma pessoa sem sintomas visÃ­veis de IST nÃ£o pode ter nenhuma infecÃ§Ã£o.", "resposta_correta": "F", "explicacao": "FALSO. Muitas IST (como ClamÃ­dia e HPV) podem ser assintomÃ¡ticas por muito tempo. Por isso sÃ£o essenciais os testes regulares e o uso de preservativo."},
        {"pergunta": "Lubrificantes Ã  base de Ã³leo sÃ£o seguros com preservativos de lÃ¡tex.", "resposta_correta": "F", "explicacao": "FALSO. Ã“leos (vaselina, Ã³leos de massagem) danificam o lÃ¡tex, tornando o preservativo menos eficaz. Use lubrificantes Ã  base de Ã¡gua ou silicone."},
        {"pergunta": "Ã‰ impossÃ­vel engravidar durante a menstruaÃ§Ã£o.", "resposta_correta": "F", "explicacao": "FALSO. Embora menos provÃ¡vel, espermatozoides sobrevivem dias no corpo e a ovulaÃ§Ã£o pode ocorrer mais cedo em alguns ciclos. Sempre use proteÃ§Ã£o se nÃ£o deseja engravidar."}
    ];

    const perguntasRisco = [
        {"pergunta": "Verdade ou Mito: Esquecer a pÃ­lula anticoncepcional num dia, mas tomÃ¡-la no dia seguinte, anula completamente o risco de gravidez.", "resposta_correta": "F", "explicacao": "FALSO. A eficÃ¡cia da pÃ­lula depende da tomada correta e diÃ¡ria. Se vocÃª falhar um dia, a proteÃ§Ã£o pode ser reduzida, e mÃ©todos de proteÃ§Ã£o adicionais (como o preservativo) devem ser usados nos dias seguintes, conforme as indicaÃ§Ãµes mÃ©dicas."},
        {"pergunta": "Ã‰ seguro usar dois preservativos ao mesmo tempo para maior proteÃ§Ã£o.", "resposta_correta": "F", "explicacao": "FALSO. Usar dois preservativos aumenta o atrito entre eles, fazendo com que ambos se rasguem mais facilmente. Use sempre apenas um preservativo de cada vez."},
        {"pergunta": "A pÃ­lula do dia seguinte pode ser usada como mÃ©todo contraceptivo regular.", "resposta_correta": "F", "explicacao": "FALSO. A pÃ­lula do dia seguinte Ã© apenas para emergÃªncias. Usar regularmente pode causar desequilÃ­brios hormonais e Ã© menos eficaz que mÃ©todos contraceptivos regulares."},
        {"pergunta": "Ã‰ possÃ­vel engravidar mesmo usando preservativo corretamente.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Nenhum mÃ©todo contraceptivo Ã© 100% eficaz. O preservativo tem cerca de 98% de eficÃ¡cia quando usado corretamente, mas ainda existe uma pequena possibilidade de falha."},
        {"pergunta": "Toda IST apresenta sintomas visÃ­veis.", "resposta_correta": "F", "explicacao": "FALSO. Muita IST (como ClamÃ­dia, HPV e HIV) pode ser assintomÃ¡tica por longos perÃ­odos. Por isso Ã© importante fazer testes regulares e usar sempre preservativo."},
        {"pergunta": "O preservativo protege contra toda IST.", "resposta_correta": "F", "explicacao": "FALSO. O preservativo protege contra a maioria das IST, mas algumas como HPV e Herpes podem ser transmitidas pelo contato com Ã¡reas da pele nÃ£o cobertas pelo preservativo."},
        {"pergunta": "Lubrificantes Ã  base de Ã³leo sÃ£o seguros para usar com preservativos de lÃ¡tex.", "resposta_correta": "F", "explicacao": "FALSO. Lubrificantes Ã  base de Ã³leo (como vaselina ou Ã³leos de massagem) podem danificar o lÃ¡tex do preservativo, tornando-o menos eficaz e mais propenso a rasgar. Use sempre lubrificantes Ã  base de Ã¡gua ou silicone com preservativos de lÃ¡tex."},
        {"pergunta": "Ã‰ possÃ­vel engravidar tendo relaÃ§Ã£o sexual durante a menstruaÃ§Ã£o.", "resposta_correta": "V", "explicacao": "VERDADEIRO. Embora a probabilidade seja menor, espermatozoides podem sobreviver por vÃ¡rios dias no corpo feminino, e a ovulaÃ§Ã£o pode ocorrer mais cedo em alguns ciclos, levando Ã  gravidez. Sempre use proteÃ§Ã£o se nÃ£o deseja engravidar."},
        {"pergunta": "IST Ã© um problema de saÃºde apenas para pessoas sexualmente ativas com mÃºltiplos parceiros.", "resposta_correta": "F", "explicacao": "FALSO. Qualquer pessoa sexualmente ativa pode contrair uma IST, independentemente do nÃºmero de parceiros. O risco estÃ¡ na prÃ¡tica sexual desprotegida."},
        {"pergunta": "O sexo anal Ã© uma prÃ¡tica de baixo risco para a transmissÃ£o de IST em comparaÃ§Ã£o com o sexo vaginal.", "resposta_correta": "F", "explicacao": "FALSO. O sexo anal Ã©, na verdade, uma prÃ¡tica de alto risco para a transmissÃ£o de IST (incluindo o HIV) devido Ã  maior fragilidade do tecido anal, que pode sofrer microlesÃµes mais facilmente. O uso correto do preservativo e lubrificante Ã© essencial."}
    ];

    // ==============================================
    // INICIALIZAÃ‡ÃƒO FINAL (DEVE ESTAR NO FIM)
    // ==============================================
    document.addEventListener('DOMContentLoaded', function() {
        // Inicializa o display (para mostrar Jogador 1/2 na tela)
        updatePlayerDisplay();
        
        // Configura o clique do botÃ£o de inÃ­cio para chamar a funÃ§Ã£o que inicia o jogo.
        document.getElementById('startButton').addEventListener('click', startGame);
        
        // Controle de Ã¡udio do vÃ­deo na splash screen
        const introVideo = document.getElementById('introVideo');
        introVideo.addEventListener('click', () => {
            introVideo.muted = !introVideo.muted;
            if (!introVideo.muted) {
                isMuted = false;
                document.getElementById('muteButton').textContent = 'ðŸ”Š';
                bgm.muted = false;
                bgm.play().catch(e => console.log("Erro ao iniciar BGM:", e));
            }
        });
    });
  </script>
 </body>
</html>
